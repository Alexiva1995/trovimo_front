<div class="section-form">
  <!--PRECIO-->
  <div class="row" style="align-items: center">
    <div class="col-lg-6">
      <div class="form-group">
        <label class="required">Price</label>
        <div class="input-group area">
          <input
            [(ngModel)]="mainInfo.price"
            (ngModelChange)="onChange()"
            aria-label="Amount (to the nearest dollar)"
            class="form-control form-control-lg"
            style="border-right: none"
            type="number"
            min="1"
            required
          >
          <div class="input-group-append">
            <select class="form-select" [ngStyle]="{'border-top-right-radius': type != 1 && type != 2 && type != 4 ? '0px':'8px',
            'border-bottom-right-radius': type != 1 && type != 2 && type != 4 ? '0px':'8px'}">
              <option selected value="1">COP</option>
              <option value="2">USD</option>
              <option value="3">EUR</option>
              <option value="4">CHF</option>
            </select>
            <span *ngIf="type != 1 && type != 2 && type != 4"  class="input-group-text-custom" style="border-top-right-radius: 8px;border-bottom-right-radius: 8px; color: white !important;">Month</span>
            <div style="margin-left: 10px">

              <app-help-tooltip *ngIf="type != 1 && type != 2 && type != 4" ></app-help-tooltip>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="custom-control custom-checkbox">
        <input
          [(ngModel)]="mainInfo.show_price"
          (ngModelChange)="onChange()"
          class="custom-control-input"
          type="checkbox"
          id="show_price"
        >
        <label class="custom-control-label" for="show_price">
          Do not show price ( Price upon request)
        </label>
      </div>
    </div>
  </div>
  <!---->

  <!-- SELECTOR NUMERICOS -->
  <div *ngIf="type == 1 || type == 2 || type == 4"  class="row">
    <div class="col-6 col-lg-3" *ngIf="type !== 1 && type !== 2">
      <div class="form-group">
        <label class="required" for="exampleInputEmail1">Area</label>
        <div class="input-group area">
          <input
            class="form-control  form-control-lg"
            type="number"
            [(ngModel)]="mainInfo.area"
            (ngModelChange)="onChange()"
          >
          <select class="form-select">
            <option selected value="1">M2</option>
            <option value="2">sqft</option>
          </select>
        </div>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="form-group">
        <label class="required">Rooms</label>
        <app-number-selector [min]="1" [value]="mainInfo.rooms" (setValue)="mainInfo.rooms = $event"></app-number-selector>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="form-group">
        <label class="required" >Bath</label>
        <app-number-selector  min="1" [value]="mainInfo.bath" (setValue)="mainInfo.bath = $event"></app-number-selector>
      </div>
    </div>
    <div class="col-6 col-lg-3">
      <div class="form-group">
        <label >Parking spots</label>
        <app-number-selector [min]="0" [value]="mainInfo.parking_spots" (setValue)="mainInfo.parking_spots = $event"></app-number-selector>
      </div>
    </div>
    <div class="col-6 col-lg-3" *ngIf="type == 1 || type == 2">
      <div class="form-group">
        <label>NÂ° pieces</label>
        <app-number-selector [min]="0" [value]="mainInfo.n_pieces" (setValue)="mainInfo.n_pieces = $event"></app-number-selector>
      </div>
    </div>
  </div>
  <!-- -->

  <div *ngIf="type == 1 || type == 2" class="row">
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label class="required" for="exampleInputEmail1">Area</label>
        <div class="input-group area">
          <input
            class="form-control  form-control-lg"
            type="text"
            [(ngModel)]="mainInfo.area"
            (ngModelChange)="onChange()"
          >
          <select class="form-select">
            <option selected value="1">M2</option>
            <option value="2">sqft</option>
          </select>
        </div>

      </div>
    </div>
    <div class="col-12 col-sm-6 col-lg-4">

      <div class="form-group">
        <label style="display: flex; justify-content: space-between">Year built <app-help-tooltip></app-help-tooltip></label>
        <select
          class="form-control-lg form-select"
          style="width: 100%"
          (ngModelChange)="onChange()"
          [(ngModel)]="mainInfo.year_built"
        >
          <option value="">No defined</option>
          <option *ngFor="let year of years" [value]="year">{{year}}</option>
        </select>
      </div>
    </div>
    <div class="col-12 col-sm-6 col-lg-4">

      <div class="form-group">
        <label style="display: flex; justify-content: space-between">Year remodeled <app-help-tooltip></app-help-tooltip></label>
        <select
          class="form-control-lg form-select"
          style="width: 100%"
          (ngModelChange)="onChange()"
          [(ngModel)]="mainInfo.year_remodeled"
        >
          <option value="">No defined</option>
          <option *ngFor="let year of years" [value]="year">{{year}}</option>
        </select>

      </div>
    </div>
  </div>

  <!-- -->
  <div *ngIf="type == 3 && (optionType == 11 || optionType  == 12)"  class="row">
    <div class="col-12 col-lg-6">
      <div class="form-group">
        <label class="required" for="exampleInputEmail1">Bathroom</label>
        <div class="row">
          <div class="form-check form-check-inline">
            <input [(ngModel)]="mainInfo.bathroom" class="form-check-input" id="exampleRadios1" type="radio"
                   value="Private">
            <label class="form-check-label" for="exampleRadios1">
              Private
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input [(ngModel)]="mainInfo.bathroom" class="form-check-input" id="exampleRadios2" type="radio" value="Shared">
            <label class="form-check-label" for="exampleRadios2">
              Shared
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input [(ngModel)]="mainInfo.bathroom" class="form-check-input" name="noBathroom" id="exampleRadios3" type="radio" value="No ">
            <label class="form-check-label" for="exampleRadios3">
              No
            </label>
          </div>
        </div>
      </div>
    </div>
    <div  class="col-12 col-lg-6">
      <div class="form-group">
        <label class="required" for="exampleInputEmail1">Furnished</label>
        <div class="row">
          <div class="form-check form-check-inline">
            <input [(ngModel)]="mainInfo.furnished" class="form-check-input " id="exampleRadios4" type="radio"
                   value="Full">
            <label class="form-check-label" for="exampleRadios4">
              Full
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input [(ngModel)]="mainInfo.furnished" class="form-check-input" id="exampleRadios5" type="radio" value="Partially">
            <label class="form-check-label" for="exampleRadios5">
              Partially
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input [(ngModel)]="mainInfo.furnished" class="form-check-input" id="exampleRadios6" type="radio" value="No">
            <label class="form-check-label" for="exampleRadios6">
              No
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="type == 3 && (optionType == 11 || optionType  == 12)" class="row">
    <div class="col-12 col-lg-6">
      <div class="form-group">
        <label class="required" for="exampleInputEmail1">Pets</label>
        <div class="container">
          <div class="row">
            <div class="col-4 custom-control custom-checkbox">
              <input [(ngModel)]="mainInfo.peths[0]" class="custom-control-input " id="exampleRadios7" type="checkbox"
                     value="Dogs">
              <label class="custom-control-label" for="exampleRadios7">
                Dogs
              </label>
            </div>
            <div class="col-4 custom-control custom-checkbox">
              <input [(ngModel)]="mainInfo.peths[1]" class="custom-control-input" id="exampleRadios8" type="checkbox" value="Cats">
              <label class="custom-control-label" for="exampleRadios8">
                Cats
              </label>
            </div>
            <div class="col-4 custom-control custom-checkbox">
              <input [(ngModel)]="mainInfo.peths[2]" class="custom-control-input" id="exampleRadios9" type="checkbox" value="Birds">
              <label class="custom-control-label" for="exampleRadios9">
                Birds
              </label>
            </div>
            <div class="col-4 custom-control custom-checkbox">
              <input [(ngModel)]="mainInfo.peths[3]" class="custom-control-input" id="exampleRadios10" type="checkbox" value="All">
              <label class="custom-control-label" for="exampleRadios10">
                All
              </label>
            </div>
            <div class="col-4 custom-control custom-checkbox">
              <input [(ngModel)]="mainInfo.peths[4]" class="custom-control-input" name="noPeths" id="exampleRadios11" type="checkbox" value="No">
              <label class="custom-control-label" for="exampleRadios11">
                No
              </label>
            </div>
          </div>
        </div>

      </div>
    </div>
    <div class="col-12 col-lg-6">
      <div class="form-group">
        <label class="required" for="exampleInputEmail1">Avaliable Date</label>
        <div class="container">
          <div class="row">
            <div class="col-12 remove-padding-left">
              <input
                [(ngModel)]="mainInfo.available_date"
                aria-describedby="emailHelp"
                class="form-control form-control-lg"
                required
                type="date"
              />
            </div>
            <div class="col-12 custom-control custom-checkbox">
              <input [(ngModel)]="mainInfo.show_available_date" class="custom-control-input" id="exampleRadios12" name="exampleRadios" type="checkbox" value="option3">
              <label class="custom-control-label" for="exampleRadios12">
                Show (immediatly)
              </label>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="form-group">
    <label class="required" for="exampleInputEmail1">Description</label>
    <textarea
      [(ngModel)]="mainInfo.description"
      (ngModelChange)="onChange()"
      aria-describedby="emailHelp"
      class="form-control"
      cols="5"
      required
      rows="5"
    ></textarea>
  </div>
</div>

<!--TYPES-->
<div *ngIf="type == 4" style="margin-top: 30px;margin-bottom: 30px">
  <h5 style="margin-bottom: 20px">Types of properties</h5>
  <div class="row">
    <div *ngFor="let typep of mainInfo.typesp" class="col-12 col-lg-6">
      <app-types-form [type]="typep"></app-types-form>
    </div>
    <div class="add-plan col-12 col-lg-3">
      <div class="add-icon" (click)="addProperty()"><i class="fas fa-plus"></i></div>
    </div>
  </div>
</div>

<!--LOCATION-->
<div class="section-location">
  
  <div class="row">
    <div class="col-12 section-custom">
      <h5>location</h5>
    </div>
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label class="required">Country</label>
        <select
          [(ngModel)]="mainInfo.country"
          (ngModelChange)="changeCountry()"
          class="form-control-lg form-select"
          style="width: 100%"
        >
          <option selected value="Colombia">Colombia</option>
          <option selected value="Switzerland">Switzerland</option>
        </select>
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label class="required">City</label>
        <input
          ngx-google-places-autocomplete 
          [options]= 'options'
          (onAddressChange)="AddressChange($event)"

          aria-describedby="emailHelp"
          class="form-control form-control-lg"
          required
          type="text"
        />
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label>Postal code - state</label>
        <input
          [(ngModel)]="mainInfo.postal_code"
          (ngModelChange)="onChange()"
          aria-describedby="emailHelp"
          class="form-control form-control-lg"
          required
          type="text"
        />
      </div>
    </div>
  </div>
 
  <div class="map">
    <!--mapa-->
    <app-map [lng]="latitude" [lat]="longitude"></app-map>
    <input [(ngModel)]="coordinates"
           (ngModelChange)="setCoordinates()"
           id="ocultInfo" style="font-size: 8px;color: white;border: none"/>

    <div style="display: flex; justify-content: flex-end">

      <button class="btn btn-outline-primary" style="width: 10rem;margin: auto;margin-right: 0;" (click)="showCoordinates = !showCoordinates">Coordinates</button>
    </div>
    <div >
      <div
        *ngIf="showCoordinates"
        style="width: 30rem;margin: auto;margin-right: 0;"
      >{{coordinates}}<div></div>
      </div>
    </div>

<!--PLANS-->
<div *ngIf="type == 3 && optionType == 13" style="margin-top: 30px;margin-bottom: 30px">
  <h5 style="margin-bottom: 20px">Plans</h5>
  <div class="row">
    <div *ngFor="let plan of mainInfo.plans" class="col-12 col-lg-6">
      <app-plans-form [plan]="plan"></app-plans-form>
    </div>
    <div class="add-plan col-12 col-lg-3">
      <div class="add-icon" (click)="addPlans()"><i class="fas fa-plus"></i></div>
    </div>
  </div>
</div>


<!--Media-->
<div class="section-media">
    <div class="section-custom">
      <h5>Media</h5>
      <label class="required">Photos</label>
        <div style="display: flex;flex-wrap: wrap">
            <div class="custom-input-file">
              <input #file type="file" accept='image/*' (change)="addImage(file.files)" class="input-file">
              <i class="far fa-file-image"></i>
              <span>Add photos</span>
            </div>
          <div *ngFor="let image of imagesReader; let i = index" style="margin: 10px">
              <img style="width: 165px;height: 165px" [src]="image" alt="test">
            <div class="image-actions">
              <div class="delete" (click)="removeImage(i)"><i class="far fa-trash-alt"></i></div>
            </div>
          </div>
        </div>
    </div>
  <div class="section-custom">
      <label>Video</label>
      <p>Copy the URL of the youtube video you want to include</p>
        <div class="row">
          <div class="form-group col-10 col-lg-6">
              <input class="form-control" type="text" [(ngModel)]="videoUrl">
          </div>
          <div class="col-2 col-lg-2">
            <button class="btn btn-primary" (click)="addVideoUrl()">
              Add
            </button>
          </div>
        </div>
        <div style="display: flex;flex-wrap: wrap">
          <div class="custom-input-file">
            <input #filevideo placeholder="Youtube embed url" type="file" accept='video/*' (change)="addVideo(filevideo.files)" class="input-file">
            <i class="far fa-file-video"></i>
            <span>Add videos</span>
          </div>
          <div *ngFor="let video of videosReader; let i = index" style="margin: 10px;">
            <div *ngIf="!isVideoUrl(i)" style="z-index: 0">
              <video style="width: 165px;height: 165px;background-color: black" [src]="video" controls></video>
            </div>
            <div *ngIf="isVideoUrl(i)" style="z-index: 0">
              <iframe width="165" height="165" [src]="video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
            </div>
            <div class="image-actions">
              <div class="delete" (click)="removeVideo(i)"><i class="far fa-trash-alt"></i></div>
            </div>
          </div>
        </div>
  </div>

  <!-- 360 tour -->
  <div class="row">
    <div class="col-12">
      <label>360 tour</label>
      <p>Copy the URL of the 360 tour you want to include</p>
    </div>
    <div class="col-12 col-lg-6">
      <div class="form-group">
        <div class="row-custom">
          <input
            [(ngModel)]="mainInfo.tour"
            (ngModelChange)="onChange()"
            placeholder="url"
            class="form-control"
            type="text"
          >
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-contact">
  <div class="row">
    <div class="col-12 section-custom">
      <h5>Contact</h5>
    </div>
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label>Name</label>
        <input
          [(ngModel)]="mainInfo.name"
          (ngModelChange)="onChange()"
          aria-describedby="emailHelp"
          class="form-control"
          id="exampleInputEmail1"
          required
          type="text"
        />
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label>Email</label>
        <input
          [(ngModel)]="mainInfo.email"
          (ngModelChange)="onChange()"
          aria-describedby="emailHelp"
          class="form-control"
          required
          type="text"
        />
      </div>
    </div>
    <div class="col-12 col-lg-4">
      <div class="form-group">
        <label for="exampleInputEmail1">Phone</label>
        <input
          [(ngModel)]="mainInfo.phone"
          (ngModelChange)="onChange()"
          aria-describedby="emailHelp"
          class="form-control"
          required
          type="text"
        />
      </div>
    </div>
  </div>
</div>

